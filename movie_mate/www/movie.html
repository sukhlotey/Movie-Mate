{% extends 'templates/web.html' %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="/css(movie_mate)/movie.css">
{% endblock %}

{% block page_content %}
<div class="container py-5 movie-page">
    <div class="row">
        <div class="col-md-3">
            <img alt="{{ title }}" src="{{ poster_image or '/files/placeholder.jpg' }}" class="img-fluid rounded shadow">
        </div>
        <div class="col-md-9">
            <h1>{{ title }}</h1>
            <p class="lead">Genre: {{ genre }}</p>
            <p>Release Year: <strong>{{ release_year }}</strong></p>
            <p>IMDB Rating: <strong>{{ imdb_rating or 'N/A' }}</strong></p>
            <p>Director: <strong>{{ director or 'N/A' }}</strong></p>
            <p>Country: <strong>{{ country or 'N/A' }}</strong></p>
            <p>Status: <strong>{{ status or 'N/A' }}</strong></p>
            <p class="mt-4">{{ description }}</p>
            <p>Average Rating: <strong>{{ average_rating or 'No ratings yet' }}</strong></p>
            {% if frappe.session.user != 'Guest' %}
            <div class="mt-4">
                <h4>Rate this Movie</h4>
                <select id="rating" class="form-select w-25">
                    <option value="" selected disabled>Select Rating</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <button class="btn btn-primary mt-2" onclick="submit_rating('{{ name }}')">Submit Rating</button>
            </div>
            {% else %}
            <p><a href="/login">Log in</a> to rate this movie.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="/js(movie_mate)/movie.js"></script>
{% endblock %}
